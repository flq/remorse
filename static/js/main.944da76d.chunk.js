(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,n){e.exports=n(289)},142:function(e,t,n){},148:function(e,t,n){},151:function(e,t,n){},155:function(e,t,n){},157:function(e,t,n){},159:function(e,t,n){},289:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"changeMorsedText",function(){return te}),n.d(r,"changeSoundSpeed",function(){return ne}),n.d(r,"playSound",function(){return re});var a=n(1),c=n.n(a),o=n(59),u=n.n(o),i=(n(142),n(117)),l=n(118),s=n(134),m=n(119),d=n(135),p=n(297),f=n(291),E=n(33),h=n(120),g=n(16),v=n(296),b=(n(148),"remorse.state"),y="remorse.traindata.read",N="remorse.traindata.write";function T(e){var t=e.condition,n=e.children;return t?n:null}function I(e){var t=e.children,n=e.unit;return c.a.createElement("div",{className:"numberWithUnit"},c.a.createElement("span",null,t),c.a.createElement("span",null,n))}var S=window.localStorage||{setItem:function(e,t){this[e]=t},getItem:function(e){return this[e]}};function w(e,t){S.setItem(e,JSON.stringify(t))}function O(e){var t=S.getItem(e);return t?JSON.parse(t):null}function x(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}var k=Object(g.b)(function(e){return e},{saveProgress:function(){return function(e,t){w(b,t()),e({type:"NO_OP"})}}})(function(e){var t=e.saveProgress;return c.a.createElement("div",{id:"globalCommands"},c.a.createElement("button",{onClick:t},c.a.createElement("span",{role:"img","aria-label":"Save state"},"\ud83d\udcbe")),c.a.createElement("span",{className:"tooltiptext"},"Save training settings"))});function C(){return c.a.createElement("nav",null,c.a.createElement(v.a,{to:"/typing"},"Type text"),c.a.createElement(v.a,{to:"/test-writing-morse"},"Test your writing skills"),c.a.createElement(v.a,{to:"/test-reading-morse"},"Test your reading skills"),c.a.createElement(v.a,{to:"/training-data"},"See your training data"),c.a.createElement(k,null))}var R=n(35),A=n(20);function j(e,t,n){return Object(A.a)({},e,{currentTraining:n(e.currentTraining,t)})}for(var _=Object(E.c)({typing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_MORSE_TEXT":return Object(A.a)({},e,{userInput:t.userInput});case"CHANGE_SOUND_SPEED":return Object(A.a)({},e,{soundSpeed:t.soundSpeed});default:return e}},train:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_TRAIN_COUNT":return Object(A.a)({},e,{trainCount:t.value});case"CHANGE_TRAINING_SCOPE":return Object(A.a)({},e,{lettersInScope:t.lettersInScope});case"START_TRAINING":return j(e,t,function(t){return{started:!0,itemsLeft:e.trainCount,currentTime:-4}});case"TRAINING_FRAME":return j(e,t,function(e,t){return Object(A.a)({},e,{currentLetter:t.currentLetter||e.currentLetter,currentTime:e.currentTime+1})});case"TRAINING_UPDATE":return j(e,t,function(e,t){return Object(A.a)({},e,{userInput:t.userInput})});case"TRAINING_STOPPED":return j(e,t,function(e,t){return{started:!1}});case"TRAINING_PROCEEDS":return j(e,t,function(e,t){return Object(A.a)({},e,{itemsLeft:e.itemsLeft-1,results:[].concat(Object(R.a)(e.results||[]),[t.succeeded]),currentLetter:t.nextLetter,userInput:""})});case"TRAINING_ENDED":return j(e,t,function(e,t){return Object(A.a)({},e,{itemsLeft:0,currentLetter:"",userInput:"",ended:!0,successRate:t.successRate})});default:return e}}}),D=(n(151),n(30)),G=n.n(D),L=n(46),P=[".",",","?","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","1","2","3","4","5","6","7","8","9","0"],M=[".-.-.-","--..--","..--..",".-","-...","-.-.","-..",".","..-.","--.","....","..",".---","-.-",".-..","--","-.","---",".--.","--.-",".-.","...","-","..-","...-",".--","-..-","-.--","--..",".----","..---","...--","....-",".....","-....","--...","---..","----.","-----"],F={},W={},H=0;H<P.length;H++)F[P[H]]=M[H],W[M[H]]=P[H];function K(e){return e?F[e.toLowerCase()]||"?":""}F[" "]=" ",W[" "]=" ";var U=50,B=150,J=400,q=null,z=null;try{z=new(window.AudioContext||window.webkitAudioContext),(q=z.createOscillator()).type="sine",q.frequency.value=880,q.start()}catch(qe){console.warn("Oscillator not available in your env"),z={destination:{}},q={connect:function(){},disconnect:function(){}}}function X(e,t){return V.apply(this,arguments)}function V(){return(V=Object(L.a)(G.a.mark(function e(t,n){var r,a,c,o;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.resume();case 2:r=Array.from(t),a=0;case 4:if(!(a<r.length)){e.next=14;break}return c=r[a],o=K(c),e.next=9,$(Array.from(o),n);case 9:return e.next=11,ee(B/n);case 11:a++,e.next=4;break;case 14:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function $(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(L.a)(G.a.mark(function e(t){var n,r,a,c,o,u,i,l=arguments;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=l.length>1&&void 0!==l[1]?l[1]:1,r=!0,a=!1,c=void 0,e.prev=4,o=t[Symbol.iterator]();case 6:if(r=(u=o.next()).done){e.next=33;break}i=u.value,e.t0=i,e.next="."===e.t0?11:"-"===e.t0?18:" "===e.t0?25:28;break;case 11:return Y(),e.next=14,ee(U/n);case 14:return Z(),e.next=17,ee(U/n);case 17:return e.abrupt("break",30);case 18:return Y(),e.next=21,ee(B/n);case 21:return Z(),e.next=24,ee(U/n);case 24:return e.abrupt("break",30);case 25:return e.next=27,ee(J/n);case 27:return e.abrupt("break",30);case 28:return console.log(i),e.abrupt("break",30);case 30:r=!0,e.next=6;break;case 33:e.next=39;break;case 35:e.prev=35,e.t1=e.catch(4),a=!0,c=e.t1;case 39:e.prev=39,e.prev=40,r||null==o.return||o.return();case 42:if(e.prev=42,!a){e.next=45;break}throw c;case 45:return e.finish(42);case 46:return e.finish(39);case 47:case"end":return e.stop()}},e,this,[[4,35,39,47],[40,,42,46]])}))).apply(this,arguments)}function Y(){q.connect(z.destination)}function Z(){q.disconnect(z.destination)}function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(n,r){setTimeout(function(){return n(t)},e)})}function te(e){var t=e.split(" ");return t.length>5&&(t.shift(),e=t.join(" ")),{type:"CHANGE_MORSE_TEXT",userInput:e}}function ne(e){return{type:"CHANGE_SOUND_SPEED",soundSpeed:e}}function re(){return function(){var e=Object(L.a)(G.a.mark(function e(t,n){var r,a,c;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n().typing,a=r.userInput,c=r.soundSpeed,X(a,c);case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}n(155);var ae={morse:1,char:2},ce=ae.char|ae.morse;function oe(e){var t=e.word,n=Array.from(t).map(function(e,t){return c.a.createElement(ie,{key:t,char:e})});return c.a.createElement("span",{className:"morseWord"},n)}function ue(e){var t=e.text;return t?c.a.createElement("section",null,t.split(" ").map(function(e,t){return c.a.createElement(oe,{key:t,word:e})})):null}function ie(e){var t=e.char,n=e.renderMode,r=void 0===n?ce:n;return c.a.createElement("div",{className:"morseToken"},r&ae.char&&c.a.createElement("span",{className:"morseChar"},t),r&ae.morse&&c.a.createElement("span",{className:"morseCode"},K(t)))}var le=Object(g.b)(function(e){return e.typing},r)(function(e){var t=e.userInput,n=void 0===t?"":t,r=(e.count,e.soundSpeed),a=void 0===r?1:r,o=e.changeMorsedText,u=e.changeSoundSpeed,i=e.playSound;return c.a.createElement("section",{className:"typingScreen"},c.a.createElement("form",null,c.a.createElement("input",{autoFocus:!0,type:"text",className:"userInput",autoComplete:"off",value:n,onChange:function(e){return o(e.currentTarget.value)},placeholder:"Type what should be morsed"}),c.a.createElement("div",{className:"soundControls"},c.a.createElement("input",{type:"range",max:"1.0",min:"0.3",step:"0.1",onChange:function(e){return u(e.currentTarget.value)},value:a}),c.a.createElement("span",null,100*a," %"),c.a.createElement("input",{type:"button",className:"soundButton",value:"\ud83d\udd0a",onClick:i}))),c.a.createElement(ue,{text:n}))}),se=(n(157),n(7)),me=n.n(se);function de(e){var t=e.scope,n=e.changeWritingScope;return c.a.createElement("section",{className:"learningScope"},P.map(function(e){return c.a.createElement(pe,{key:e,letter:e,inScope:t.indexOf(e)>=0,selectLetter:function(){return n(e)}})}))}function pe(e){var t=e.letter,n=e.inScope,r=e.selectLetter,a=me()({inScope:n});return c.a.createElement("button",{className:a,onClick:r},t)}function fe(e){var t=e.currentTraining,n=e.lettersInScope,r=e.trainCount,a=e.changeWritingScope,o=e.putAllInScope,u=e.removeAllFromScope,i=e.changeTrainCount,l=e.startTraining;return c.a.createElement(T,{condition:!(t&&t.started)},c.a.createElement("div",{className:"flex-column"},c.a.createElement("div",{className:"flex-row toolBox"},c.a.createElement("h2",null,"What do you want to train?"),c.a.createElement("button",{onClick:o},"All"),c.a.createElement("button",{onClick:u},"None")),c.a.createElement(de,Object.assign({scope:n},{changeWritingScope:a})),c.a.createElement("div",{className:"flex-row toolBox"},c.a.createElement("h2",null,"Train "),c.a.createElement("input",{type:"range",min:"10",max:"100",step:"10",onChange:function(e){return i(e.currentTarget.value)},value:r}),c.a.createElement("h2",null,r," times."),c.a.createElement("button",{onClick:l,disabled:n.length<2},"Start!"))))}var Ee=n(123),he=n.n(Ee);function ge(e){var t=e.started,n=e.ended,r=e.itemsLeft,a=e.currentTime,o=e.currentLetter,u=e.userInput,i=e.results,l=e.successRate,s=(e.expectedInput,e.evaluateUserInput),m=e.forceStopTraining,d=e.saveTraining;return t?c.a.createElement("div",{id:"training"},c.a.createElement(he.a,{onKey:function(e){return s(e.key)}}),c.a.createElement("div",{className:"toolBox"},c.a.createElement("button",{disabled:n,onClick:m},"Stop the training"),c.a.createElement(I,{unit:"seconds"},a),c.a.createElement(I,{unit:"items left"},r),c.a.createElement("h2",null,function(e){var t=null;if(e>0)return"";switch(e){case-4:case-3:t="Use keys '-' and '.' to write";break;case-2:t="Ready...";break;case-1:t="Steady...";break;case 0:t="Go!";break;default:t=""}return t}(a))),c.a.createElement(ve,{results:i}),n&&c.a.createElement("h2",null,"Well done, you got ",100*l," % right!"),n&&c.a.createElement("button",{id:"saveTraining",onClick:d},"Save Training"),c.a.createElement("div",null,c.a.createElement(T,{condition:o},c.a.createElement("p",null,o)),c.a.createElement(T,{condition:u},c.a.createElement("p",null,u)))):null}function ve(e){var t=e.results,n=void 0===t?[]:t;return c.a.createElement("div",{id:"results"},n.map(function(e,t){return c.a.createElement("span",{key:t,className:me()({success:e,fail:!e})})}))}function be(e){var t=e.trainDataStorageKey,n=e.nextLetterProvider,r=e.inputFromKey,a=e.expectedInputFromCurrentTrainingSet,c=null;return{startTraining:function(){return function(e,t){clearInterval(c),e({type:"START_TRAINING"}),c=setInterval(function(){return function(e,t){-1===t.currentTraining.currentTime?e({type:"TRAINING_FRAME",currentLetter:n(t.lettersInScope)}):e({type:"TRAINING_FRAME"})}(e,t().train)},1e3)}},forceStopTraining:function(){return clearInterval(c),{type:"TRAINING_STOPPED"}},changeWritingScope:function(e){return function(t,n){var r=n().train.lettersInScope,a=r.indexOf(e);t({type:"CHANGE_TRAINING_SCOPE",lettersInScope:-1===a?[].concat(Object(R.a)(r),[e]):[].concat(Object(R.a)(r.slice(0,a)),Object(R.a)(r.slice(a+1)))})}},putAllInScope:function(){return function(e){e({type:"CHANGE_TRAINING_SCOPE",lettersInScope:Object(R.a)(P)})}},removeAllFromScope:function(){return function(e){e({type:"CHANGE_TRAINING_SCOPE",lettersInScope:[]})}},changeTrainCount:function(e){return{type:"CHANGE_TRAIN_COUNT",value:e}},evaluateUserInput:function(e){var t=r(e);return t?function(e,r){var o=r().train,u=o.currentTraining,i=o.lettersInScope,l=(u.userInput||"")+t,s=a(u.currentLetter);l.length===s.length?(e({type:"TRAINING_PROCEEDS",succeeded:l===s,nextLetter:n(i)}),1===u.itemsLeft&&(clearInterval(c),e({type:"TRAINING_ENDED",successRate:ye(r().train.currentTraining.results)}))):e({type:"TRAINING_UPDATE",userInput:l})}:{type:"NO_OP"}},saveTraining:function(){return function(e,n){var r=n().train,a={time:new Date,successRate:r.currentTraining.successRate,scopeRatio:(r.lettersInScope.length/P.length).toFixed(2),amount:r.trainCount,timeTaken:r.currentTraining.currentTime},c=O(t)||[];c.push(a),w(t,c),e({type:"TRAINING_STOPPED"})}}}}function ye(e){return(e.reduce(function(e,t){return t?e+1:e},0)/e.length).toFixed(2)}var Ne=be({trainDataStorageKey:N,nextLetterProvider:function(e){return e[x(0,e.length)]},inputFromKey:function(e){return"."===e||"-"===e?e:null},expectedInputFromCurrentTrainingSet:K}),Te=Object(g.b)(function(e){return e.train.currentTraining||{}},Ne)(ge);var Ie=Object(g.b)(function(e){return e.train},Ne)(function(e){return c.a.createElement("section",null,c.a.createElement(fe,e),c.a.createElement(Te,null))});var Se=be({trainDataStorageKey:y,nextLetterProvider:function(e){return K(e[x(0,e.length)])},inputFromKey:function(e){return e},expectedInputFromCurrentTrainingSet:function(e){return e?W[e.toLowerCase()]||"?":""}}),we=Object(g.b)(function(e){return e.train.currentTraining||{}},Se)(ge);var Oe=Object(g.b)(function(e){return e.train},Se)(function(e){return c.a.createElement("section",null,c.a.createElement(fe,e),c.a.createElement(we,null))});n(159);function xe(e){return c.a.createElement("div",{className:"flex-row wrap"},c.a.createElement(ke,{header:"Reading",data:O(y)||[]}),c.a.createElement(ke,{header:"Writing",data:O(N)||[]}))}function ke(e){var t=e.header,n=e.data;return c.a.createElement("div",{className:"tableData"},c.a.createElement("h3",null,t),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"When"),c.a.createElement("th",null,"Success"),c.a.createElement("th",null,"Scope"),c.a.createElement("th",null,"Repeats"),c.a.createElement("th",null,"Duration"),c.a.createElement("th",null,c.a.createElement("span",null,"Morscore"),c.a.createElement("span",{className:"tooltiptext"},"The morscore takes all numbers recorded in your training and calculates a score that considers your success, scope, size and time taken.")))),c.a.createElement("tbody",null,n.map(function(e,t){var n=e.time,r=e.successRate,a=e.scopeRatio,o=e.amount,u=e.timeTaken;return c.a.createElement("tr",{key:t},c.a.createElement("td",null,function(e){var t=new Date(e);return"".concat(t.toLocaleDateString()," ").concat(t.getHours(),":").concat(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())}(n)),c.a.createElement("td",null,100*r," %"),c.a.createElement("td",null,100*a," %"),c.a.createElement("td",null,o),c.a.createElement("td",null,u," s"),c.a.createElement("td",null,function(e,t,n,r){return(e*t*(1.3*n/r)).toFixed(2)}(r,a,o,u)))}))))}var Ce=n(295),Re=n(287),Ae=n(288),je=n(294),_e=n(290),De=n(116),Ge=n(292),Le=n(50);function Pe(e){return c.a.createElement("div",{className:"flex-row wrap"},c.a.createElement(Me,{header:"Reading",data:O(y)||[]}),c.a.createElement(Me,{header:"Writing",data:O(N)||[]}))}function Me(e){var t=e.header,n=function(e){var t=Object(Le.groupBy)(e,function(e){return new Date(e.time).toLocaleDateString()});return Object(Le.reduce)(t,function(e,t,n){var r=t.length,a=Object(Le.reduce)(t,function(e,t){return{successRate:(e.successRate||0)+100*t.successRate,scopeRatio:(e.scopeRatio||0)+100*t.scopeRatio,charPerMin:(e.charPerMin||0)+parseInt(t.amount,10)/t.timeTaken*60}},{});return(a=Object(Le.mapValues)(a,function(e){return parseFloat((e/r).toFixed(2))})).originalDay=new Date(t[0].time),a.day=0===e.length?1:e[e.length-1].day+function(e,t){var n=Math.abs(e.getTime()-t.getTime());return Math.ceil(n/864e5)}(a.originalDay,e[e.length-1].originalDay),e.push(a),e},[])}(e.data);return c.a.createElement("div",{className:"chartData"},c.a.createElement("h3",null,t),c.a.createElement(Ce.a,{width:600,height:300,data:n,margin:{top:5,right:30,left:20,bottom:5}},c.a.createElement(Re.a,{dataKey:"day",label:"Days"}),c.a.createElement(Ae.a,null),c.a.createElement(je.a,{strokeDasharray:"3 3"}),c.a.createElement(_e.a,null),c.a.createElement(De.a,null),c.a.createElement(Ge.a,{type:"monotone",dataKey:"successRate",stroke:"green",name:"Success %"}),c.a.createElement(Ge.a,{type:"monotone",dataKey:"scopeRatio",stroke:"#8884d8",name:"Scope %"}),c.a.createElement(Ge.a,{type:"monotone",dataKey:"charPerMin",stroke:"orange",name:"Characters / Minute"})))}function Fe(e){var t=e.match;return c.a.createElement("div",null,c.a.createElement(We,{parent:t.url}),c.a.createElement(f.a,{path:t.url+"/tabular",render:xe}),c.a.createElement(f.a,{path:t.url+"/chart",render:Pe}))}function We(e){var t=e.parent;return c.a.createElement("nav",{className:"sub"},c.a.createElement(v.a,{to:t+"/tabular"},"Raw data"),c.a.createElement(v.a,{to:t+"/chart"},"Chart"))}var He=O(b)||{typing:{userInput:"",soundSpeed:.8},train:{lettersInScope:[],trainCount:20}},Ke=Object(E.d)(_,He,Object(E.a)(h.a)),Ue=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement(p.a,{basename:"/remorse"},c.a.createElement(g.a,{store:Ke},c.a.createElement("div",{id:"root"},c.a.createElement(C,null),c.a.createElement(f.a,{path:"/typing",component:le}),c.a.createElement(f.a,{path:"/test-writing-morse",component:Ie}),c.a.createElement(f.a,{path:"/test-reading-morse",component:Oe}),c.a.createElement(f.a,{path:"/training-data",component:Fe}))))}}]),t}(a.Component),Be=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Je(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}u.a.render(c.a.createElement(Ue,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/remorse",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/remorse","/service-worker.js");Be?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Je(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):Je(e)})}}()}},[[137,2,1]]]);
//# sourceMappingURL=main.944da76d.chunk.js.map